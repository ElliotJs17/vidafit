<div class="recetas-page">
  <!-- Sidebar de filtrado mejorado -->
  <aside class="filtros-sidebar">
    <div class="sidebar-header">
      <h3><span class="icon-filter">ğŸ”</span> Filtrar Recetas</h3>
      <p class="sidebar-subtitle">Encuentra recetas segÃºn tus preferencias</p>
    </div>

    <div class="filtros-container">
      <div class="filtro-group">
        <label for="filtro-categoria" class="filtro-label">
          <span class="icon-label">ğŸ½ï¸</span> CategorÃ­a
        </label>
        <select id="filtro-categoria" class="filtro-select">
          <option value="">Todas las categorÃ­as</option>
          <option value="Desayuno">ğŸŒ… Desayuno</option>
          <option value="Almuerzo">ğŸ½ï¸ Almuerzo</option>
          <option value="Cena">ğŸŒ™ Cena</option>
          <option value="Snack">ğŸª Snack</option>
        </select>
      </div>

      <div class="filtro-group">
        <label for="filtro-dificultad" class="filtro-label">
          <span class="icon-label">ğŸ“Š</span> Dificultad
        </label>
        <select id="filtro-dificultad" class="filtro-select">
          <option value="">Todas las dificultades</option>
          <option value="FÃ¡cil">â­ FÃ¡cil</option>
          <option value="Media">â­â­ Media</option>
          <option value="DifÃ­cil">â­â­â­ DifÃ­cil</option>
        </select>
      </div>

      <div class="filtro-group">
        <label for="filtro-tiempo" class="filtro-label">
          <span class="icon-label">â±ï¸</span> Tiempo mÃ¡ximo
        </label>
        <select id="filtro-tiempo" class="filtro-select">
          <option value="">Cualquier tiempo</option>
          <option value="15">âš¡ Hasta 15 min</option>
          <option value="30">ğŸ• Hasta 30 min</option>
          <option value="60">ğŸ•‘ Hasta 1 hora</option>
        </select>
      </div>

      <div class="filtro-group">
        <label for="filtro-calorias" class="filtro-label">
          <span class="icon-label">ğŸ”¥</span> CalorÃ­as mÃ¡ximas
        </label>
        <select id="filtro-calorias" class="filtro-select">
          <option value="">Cualquier cantidad</option>
          <option value="200">ğŸƒ Hasta 200 cal</option>
          <option value="400">ğŸ”¥ Hasta 400 cal</option>
          <option value="600">ğŸ’ª Hasta 600 cal</option>
        </select>
      </div>

      <button
        id="limpiar-filtros"
        class="btn-limpiar"
        aria-label="Limpiar todos los filtros"
      >
        <span class="btn-icon">ğŸ—‘ï¸</span>
        <span class="btn-text">Limpiar Filtros</span>
      </button>
    </div>
  </aside>

  <!-- Contenido principal mejorado -->
  <main class="recetas-content">
    <header class="repo-header">
      <div class="header-left">
        <h1><span class="icon-title">ğŸ“–</span> Repositorio de Recetas</h1>
        <p class="subtitle">Descubre, crea y comparte tus recetas saludables</p>
      </div>
      <div class="search-container">
        <div class="search-box" role="search">
          <input
            type="text"
            id="search-input"
            placeholder="Buscar recetas, ingredientes..."
            aria-label="Buscar recetas"
          />
          <button id="search-btn" type="button" aria-label="Buscar">
            <span class="search-icon">ğŸ”</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Contador de resultados mejorado -->
    <div
      class="results-info"
      id="results-info"
      style="display: none"
      aria-live="polite"
    >
      <span class="results-count" id="results-count">0</span>
      <span class="results-text">recetas encontradas</span>
    </div>

    <!-- Loading state mejorado -->
    <div class="loading-state" id="loading-state" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      <p class="loading-text">Cargando recetas...</p>
    </div>

    <!-- Listado de recetas con mejor semÃ¡ntica -->
    <section
      class="recetas-grid"
      id="recetas-grid"
      aria-label="Listado de recetas"
    >
      <!-- Las recetas se cargarÃ¡n dinÃ¡micamente -->
    </section>

    <!-- Estado vacÃ­o mejorado -->
    <div
      class="empty-state"
      id="empty-state"
      style="display: none"
      aria-live="polite"
    >
      <div class="empty-illustration">
        <div class="empty-icon" aria-hidden="true">ğŸ³</div>
      </div>
      <h3 class="empty-title">Â¡Tu recetario estÃ¡ vacÃ­o!</h3>
      <p class="empty-message">Comienza creando tu primera receta saludable</p>
      <button
        id="btn-crear-vacio"
        class="btn-crear-vacio"
        aria-label="Crear primera receta"
      >
        <span class="btn-icon">âœ¨</span>
        <span class="btn-text">Crear mi primera receta</span>
      </button>
    </div>

    <!-- Sin resultados mejorado -->
    <div
      class="no-results"
      id="no-results"
      style="display: none"
      aria-live="polite"
    >
      <div class="no-results-icon" aria-hidden="true">ğŸ”</div>
      <h3 class="no-results-title">No se encontraron recetas</h3>
      <p class="no-results-message">
        Intenta con otros tÃ©rminos de bÃºsqueda o ajusta los filtros
      </p>
    </div>

    <!-- BotÃ³n flotante mejorado -->
    <button
      id="abrir-modal"
      class="btn-crear-floating"
      aria-label="Crear nueva receta"
    >
      <span class="btn-icon">+</span>
      <span class="btn-text">Nueva Receta</span>
    </button>
  </main>
</div>

<!-- Modal para crear/editar receta mejorado -->
<div
  class="modal-overlay"
  id="modal-receta"
  role="dialog"
  aria-modal="true"
  aria-labelledby="modal-title"
  style="display: none"
>
  <div class="modal-container">
    <div class="modal-header">
      <h2 id="modal-title" class="modal-title">âœ¨ Crear Nueva Receta</h2>
      <button
        class="modal-close"
        id="close-modal"
        type="button"
        aria-label="Cerrar modal"
      >
        <span aria-hidden="true">Ã—</span>
      </button>
    </div>

    <div class="modal-body">
      <form id="form-receta" class="form-receta">
        <!-- InformaciÃ³n bÃ¡sica mejorada -->
        <div class="form-section">
          <h3 class="section-title">
            <span class="section-icon">ğŸ“</span> InformaciÃ³n BÃ¡sica
          </h3>

          <div class="form-group">
            <label for="receta-imagen" class="form-label">
              <span class="label-icon">ğŸ–¼ï¸</span> Imagen de la receta
            </label>
            <input
              type="file"
              id="receta-imagen"
              class="form-input"
              accept="image/*"
              aria-describedby="image-help"
            />
            <small id="image-help" class="form-help">
              Sube una imagen representativa de tu receta (opcional)
            </small>
            <div
              id="imagen-preview"
              class="image-preview"
              style="display: none"
            >
              <img id="preview-img" src="" alt="Vista previa de la imagen" />
              <button
                type="button"
                id="eliminar-imagen"
                class="btn-eliminar-imagen"
              >
                Ã— Eliminar imagen
              </button>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="receta-nombre" class="form-label">
                <span class="label-icon">ğŸ½ï¸</span> Nombre de la receta *
              </label>
              <input
                type="text"
                id="receta-nombre"
                class="form-input"
                placeholder="Ej: Smoothie energÃ©tico de espinacas"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="receta-categoria" class="form-label">
                <span class="label-icon">ğŸ·ï¸</span> CategorÃ­a *
              </label>
              <select
                id="receta-categoria"
                class="form-select"
                required
                aria-required="true"
              >
                <option value="">Seleccionar categorÃ­a</option>
                <option value="Desayuno">ğŸŒ… Desayuno</option>
                <option value="Almuerzo">ğŸ½ï¸ Almuerzo</option>
                <option value="Cena">ğŸŒ™ Cena</option>
                <option value="Snack">ğŸª Snack</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="receta-desc" class="form-label">
              <span class="label-icon">ğŸ“„</span> DescripciÃ³n *
            </label>
            <textarea
              id="receta-desc"
              class="form-textarea"
              rows="3"
              placeholder="Describe tu receta de manera atractiva..."
              required
              aria-required="true"
            ></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="receta-tiempo" class="form-label">
                <span class="label-icon">â±ï¸</span> Tiempo (min) *
              </label>
              <input
                type="number"
                id="receta-tiempo"
                class="form-input"
                min="1"
                max="300"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="receta-dificultad" class="form-label">
                <span class="label-icon">ğŸ“Š</span> Dificultad *
              </label>
              <select
                id="receta-dificultad"
                class="form-select"
                required
                aria-required="true"
              >
                <option value="">Seleccionar dificultad</option>
                <option value="FÃ¡cil">â­ FÃ¡cil</option>
                <option value="Media">â­â­ Media</option>
                <option value="DifÃ­cil">â­â­â­ DifÃ­cil</option>
              </select>
            </div>
          </div>
        </div>

        <!-- InformaciÃ³n nutricional mejorada -->
        <div class="form-section">
          <h3 class="section-title">
            <span class="section-icon">ğŸ”¥</span> InformaciÃ³n Nutricional
          </h3>

          <div class="form-row">
            <div class="form-group">
              <label for="receta-calorias" class="form-label">
                <span class="label-icon">âš¡</span> CalorÃ­as totales *
              </label>
              <input
                type="number"
                id="receta-calorias"
                class="form-input"
                min="1"
                max="2000"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="receta-objetivo" class="form-label">
                <span class="label-icon">ğŸ¯</span> Objetivo
              </label>
              <select id="receta-objetivo" class="form-select">
                <option value="EnergÃ­a">âš¡ EnergÃ­a</option>
                <option value="ProteÃ­na">ğŸ’ª ProteÃ­na</option>
                <option value="Bajo en calorÃ­as">ğŸƒ Bajo en calorÃ­as</option>
                <option value="Saludable">â¤ï¸ Saludable</option>
              </select>
            </div>
          </div>

          <div class="macronutrientes-container">
            <label class="macros-label">
              <span class="label-icon">ğŸ“Š</span> Macronutrientes (gramos) *
            </label>
            <div class="macronutrientes-grid">
              <div class="macro-item">
                <label for="receta-proteinas" class="macro-label">
                  <span class="macro-icon">ğŸ¥©</span> ProteÃ­nas
                </label>
                <input
                  type="number"
                  id="receta-proteinas"
                  class="macro-input"
                  min="0"
                  step="0.1"
                  required
                  aria-required="true"
                />
              </div>
              <div class="macro-item">
                <label for="receta-carbs" class="macro-label">
                  <span class="macro-icon">ğŸ</span> Carbohidratos
                </label>
                <input
                  type="number"
                  id="receta-carbs"
                  class="macro-input"
                  min="0"
                  step="0.1"
                  required
                  aria-required="true"
                />
              </div>
              <div class="macro-item">
                <label for="receta-grasas" class="macro-label">
                  <span class="macro-icon">ğŸ¥‘</span> Grasas
                </label>
                <input
                  type="number"
                  id="receta-grasas"
                  class="macro-input"
                  min="0"
                  step="0.1"
                  required
                  aria-required="true"
                />
              </div>
            </div>
          </div>
        </div>

        <!-- Ingredientes mejorados -->
        <div class="form-section">
          <h3 class="section-title">
            <span class="section-icon">ğŸ¥•</span> Ingredientes
          </h3>
          <div
            id="ingredientes-container"
            class="dynamic-container"
            aria-live="polite"
          >
            <!-- Los ingredientes se aÃ±adirÃ¡n dinÃ¡micamente -->
          </div>
          <button
            type="button"
            id="agregar-ingrediente"
            class="btn-add-item"
            aria-label="AÃ±adir nuevo ingrediente"
          >
            <span class="btn-icon">+</span>
            <span class="btn-text">AÃ±adir Ingrediente</span>
          </button>
        </div>

        <!-- Pasos de preparaciÃ³n mejorados -->
        <div class="form-section">
          <h3 class="section-title">
            <span class="section-icon">ğŸ‘¨â€ğŸ³</span> Pasos de PreparaciÃ³n
          </h3>
          <div
            id="pasos-container"
            class="dynamic-container"
            aria-live="polite"
          >
            <!-- Los pasos se aÃ±adirÃ¡n dinÃ¡micamente -->
          </div>
          <button
            type="button"
            id="agregar-paso"
            class="btn-add-item"
            aria-label="AÃ±adir nuevo paso"
          >
            <span class="btn-icon">+</span>
            <span class="btn-text">AÃ±adir Paso</span>
          </button>
        </div>

        <!-- Palabras clave mejoradas -->
        <div class="form-section">
          <h3 class="section-title">
            <span class="section-icon">ğŸ·ï¸</span> Etiquetas
          </h3>
          <div class="form-group">
            <label for="receta-keywords" class="form-label">
              <span class="label-icon">ğŸ”–</span> Palabras clave (separadas por
              comas)
            </label>
            <input
              type="text"
              id="receta-keywords"
              class="form-input"
              placeholder="Ej: saludable, rÃ¡pido, vegano, energÃ©tico"
              aria-describedby="keywords-help"
            />
            <small id="keywords-help" class="form-help">
              Ayuda a otros usuarios a encontrar tu receta
            </small>
          </div>
        </div>

        <div class="form-actions">
          <button
            type="button"
            class="btn-cancel"
            onclick="closeModal()"
            aria-label="Cancelar y cerrar formulario"
          >
            <span class="btn-icon">âœ–</span>
            <span class="btn-text">Cancelar</span>
          </button>
          <button type="submit" class="btn-save" aria-label="Guardar receta">
            <span class="btn-icon">ğŸ’¾</span>
            <span class="btn-text">Guardar Receta</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal para ver detalles de receta mejorado -->
<div
  class="modal-overlay"
  id="modal-detalles"
  role="dialog"
  aria-modal="true"
  aria-labelledby="detalle-titulo"
  style="display: none"
>
  <div class="modal-container modal-details">
    <div class="modal-header">
      <h2 id="detalle-titulo" class="modal-title">Detalles de la Receta</h2>
      <button
        class="modal-close"
        onclick="closeDetallesModal()"
        type="button"
        aria-label="Cerrar detalles"
      >
        <span aria-hidden="true">Ã—</span>
      </button>
    </div>
    <div class="modal-body" id="detalle-contenido" aria-live="polite">
      <!-- El contenido se cargarÃ¡ dinÃ¡micamente -->
    </div>
  </div>
</div>
